@page "/"
@inject ISignedIn User
@inject NavigationManager Nav
@implements IDisposable


@if (!User.IsSignedIn)
{
    <SignIn/>
}
else
{
    <AutoNav NavTarget="@($"feed/{User.Name}")"/>
}

@code{

    protected override void OnInitialized()
    {
        User.ModelUpdated += HandleUserChange;
    }

    private void HandleUserChange()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        User.ModelUpdated -= HandleUserChange;
    }

}